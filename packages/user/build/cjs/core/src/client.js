var r=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var a=(t,e)=>{for(var n in e)r(t,n,{get:e[n],enumerable:!0})},h=(t,e,n,u)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of p(e))!d.call(t,s)&&s!==n&&r(t,s,{get:()=>e[s],enumerable:!(u=l(e,s))||u.enumerable});return t};var c=t=>h(r({},"__esModule",{value:!0}),t);var _={};a(_,{Client:()=>i,currrntClient:()=>o,getCurrentScope:()=>g,setCurrentScope:()=>m});module.exports=c(_);var o,g=()=>o,m=t=>{o=t},i=class{constructor(e){this._queue=[];this._time=0;this._flushTimer=null;this.colletEvent=null;this._options=e,e.dsn?this._dsn=e.dsn:console.debug("options missing dsn"),this._transport=e.transport}init(){let{plugins:e}=this._options;console.log("client init"),e.forEach(n=>{n(this._options)})}sendEvent(){this._queue.length!==0&&(this._flushTimer!==null?(clearTimeout(this._flushTimer),this.sendQueueHandle()):this.sendQueueHandle())}sendQueueHandle(){this._time=this._options.flushTime||this._time,this._queue.length<30?this._flushTimer=setTimeout(()=>{this._transport.send(),this.sendEvent()},this._time):(this._transport.send(),this.sendEvent())}triggerSend(e){this._queue.push(e),this.sendEvent()}getQueue(){return this._queue}};0&&(module.exports={Client,currrntClient,getCurrentScope,setCurrentScope});
//# sourceMappingURL=client.js.map