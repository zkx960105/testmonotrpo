var l=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var C=(t,e)=>{for(var n in e)l(t,n,{get:e[n],enumerable:!0})},_=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of m(e))!y.call(t,i)&&i!==n&&l(t,i,{get:()=>e[i],enumerable:!(r=f(e,i))||r.enumerable});return t};var x=t=>_(l({},"__esModule",{value:!0}),t);var T={};C(T,{Client:()=>s,createTransport:()=>d,currrntClient:()=>o,initAndBind:()=>a,pluginHandler:()=>c});module.exports=x(T);var o,u=()=>o,p=t=>{o=t},s=class{constructor(e){this._queue=[];this._time=0;this._flushTimer=null;this.colletEvent=null;this._options=e,e.dsn?this._dsn=e.dsn:console.debug("options missing dsn"),this._transport=e.transport}init(){let{plugins:e}=this._options;console.log("client init"),e.forEach(n=>{n(this._options)})}sendEvent(){this._queue.length!==0&&(this._flushTimer!==null?(clearTimeout(this._flushTimer),this.sendQueueHandle()):this.sendQueueHandle())}sendQueueHandle(){this._time=this._options.flushTime||this._time,this._queue.length<30?this._flushTimer=setTimeout(()=>{this._transport.send(),this.sendEvent()},this._time):(this._transport.send(),this.sendEvent())}triggerSend(e){this._queue.push(e),this.sendEvent()}getQueue(){return this._queue}};function a(t,e){if(u()!==void 0)throw new Error("client has been instantiated");{let r=new t(e);return p(r),r.init(),r}}function c(t){let e=[],n=t.defaultIntegrations()||[],r=t.plugins;r&&Array.isArray(r)?e=[...n,...r]:e=[...n],console.log("totalPlugins",e[0]);let i=[];return e.length>0&&e.forEach(h=>{let g=h();i.push(g)}),i}function d(t,e){function n(){e(t)}return{send:n}}0&&(module.exports={Client,createTransport,currrntClient,initAndBind,pluginHandler});
//# sourceMappingURL=index.js.map